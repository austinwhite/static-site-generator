<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.">
<meta name="viewport" content="width=device-width">
<title>Second Post Test</title>
<link rel="stylesheet" href=site/rsc/styles/github.css> <link rel="stylesheet" href=site/rsc/styles/katex.min.css> <link rel="stylesheet" href=site/rsc/styles/global.css> <link rel="stylesheet" href=site/rsc/styles/posts.css>
<link rel="shortcut icon" href="site_files/favicon.ico">
</head>
<body>
<article><h1>Second Post Test</h1>
<p><a href="https://www.gnu.org/software/stow/">GNU Stow</a> is a symlink manager. Its
intended use to manage multiple versions of the same software on a single
system, however it's perfectly suited to manage Linux configuration files
as well.</p>
<p>See an example configuration on my
<a href="https://github.com/austinwhite/dotfiles">GitHub</a>
(Managed with GNU Stow at the time of this write-up)</p>
<h2>How it Works</h2>
<p>I keep all of my config files in a single git repository. This makes setting
up new systems incredibly simple.</p>
<p>Stow is easier to understand using an example.</p>
<p>Say you want your <em>.vimrc</em> file at the path <em>$HOME/.config/vim/.vimrc</em></p>
<p>To accomplish this the following file structure would exist in your dotfiles
repo.</p>
<pre><code class="hljs">vim<span class="hljs-regexp">/.config/</span>vim/.vimrc
</code></pre>
<p>The first level directroy can be named anything, stow will treat it as if
it's your home directory and create a symlink to wherever that path
terminates. This could be a single file or a directory that contains 1 or
more files.</p>
<h3>Deployment Scripts</h3>
<p>You can deploy your configurations by running <em>'stow /*'</em> to stow all
directories or <em>'stow [dir name]'</em> to stow an individual directroy. I prefer
a more granular approach so I've written my own scripts.</p>
<p><strong>Environment Setup</strong></p>
<p>Create a file with a space separated list at the root of the directory
containing your files to be stowed. You can add and remove any directory
on the fly depending on your current use case.</p>
<pre><code class="hljs"><span class="hljs-symbol">file:</span>
stow-<span class="hljs-keyword">dirs.txt
</span><span class="hljs-symbol">
contents:</span>
<span class="hljs-keyword">dir1 </span><span class="hljs-keyword">dir2 </span><span class="hljs-keyword">dir3 </span><span class="hljs-keyword">dirN
</span></code></pre>
<p>These scripts will bootstrap stow using pacman if it's not installed on your
system. If you don't use an Arch based distro switch that statement out
with the package manager of your choice.</p>
<p>I set an environment variable $DOTFILES to the path where my dotfiles git
repository resides.</p>
<p><strong>Stow Script</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

<span class="hljs-keyword">if</span> ! <span class="hljs-built_in">command</span> -v stow $&gt; /dev/null
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;command not found: stow&quot;</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;bootstrapping gnu stow...&quot;</span>
    sudo pacman -S stow
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">${DOTFILES}</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;DOTFILES environment variable does not exist.&quot;</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;setting DOTFILES to \$HOME/.dotfiles&quot;</span>
    <span class="hljs-built_in">export</span> DOTFILES=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.dotfiles&quot;</span>
<span class="hljs-keyword">fi</span>

dotfile_dirs=`<span class="hljs-built_in">cd</span> <span class="hljs-variable">${DOTFILES}</span> &amp;&amp; <span class="hljs-built_in">head</span> ./stow-dirs.txt` 

<span class="hljs-keyword">for</span> <span class="hljs-built_in">dir</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">$dotfile_dirs</span>
<span class="hljs-keyword">do</span>
    <span class="hljs-built_in">cd</span> <span class="hljs-variable">${DOTFILES}</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;stowing: <span class="hljs-variable">$dir</span>&quot;</span>
    stow -D <span class="hljs-variable">$dir</span>
    stow <span class="hljs-variable">$dir</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p><strong>Unstow Script</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

<span class="hljs-keyword">if</span> ! <span class="hljs-built_in">command</span> -v stow $&gt; /dev/null
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;command not found: stow&quot;</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;bootstrapping gnu stow...&quot;</span>
    sudo pacman -S stow
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">${DOTFILES}</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;DOTFILES environment variable does not exist.&quot;</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;setting DOTFILES to \$HOME/.dotfiles&quot;</span>
    <span class="hljs-built_in">export</span> DOTFILES=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.dotfiles&quot;</span>
<span class="hljs-keyword">fi</span>

dotfile_dirs=`<span class="hljs-built_in">cd</span> <span class="hljs-variable">${DOTFILES}</span> &amp;&amp; <span class="hljs-built_in">head</span> ./stow-dirs.txt` 

<span class="hljs-keyword">for</span> <span class="hljs-built_in">dir</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">$dotfile_dirs</span>
<span class="hljs-keyword">do</span>
    <span class="hljs-built_in">cd</span> <span class="hljs-variable">${DOTFILES}</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;un-stowing: <span class="hljs-variable">$dir</span>&quot;</span>
    stow -D <span class="hljs-variable">$dir</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p>Sed ut perspiciatis, unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam eaque ipsa, quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt, explicabo. Nemo enim ipsam voluptatem, quia voluptas sit, aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos, qui ratione voluptatem sequi nesciunt, neque porro quisquam est, qui dolorem ipsum, quia dolor sit amet consectetur adipisci[ng] velit, sed quia non numquam [do] eius modi tempora inci[di]dunt, ut labore et dolore magnam aliquam quaerat voluptatem.</p>
<p><img src="posts/Managing_Linux_Dotfiles_With_GNU_Stow/images/hero.jpg" alt="test image"></p>
<p>Test katex:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo>)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi></mrow></msubsup><msqrt><mrow><mo>(</mo><msub><mi>p</mi><mrow><mi>i</mi></mrow></msub><mo>−</mo><msub><mi>q</mi><mrow><mi>i</mi></mrow></msub><msup><mo>)</mo><mrow><mn>2</mn></mrow></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">d(p, q) =\sum_{i=0}^{n}\sqrt{(p_{i} - q_{i})^{2}} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.6513970000000002em;"></span><span class="strut bottom" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.09388000000000007em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size1">√</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord displaystyle textstyle cramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span style="top:-0.90388em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span></span></p>
</article>
</body>
</html>